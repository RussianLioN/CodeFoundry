# Expert Consilium Analysis: Make vs npm scripts

> **Date:** 2026-02-10
> **Problem:** Should I use Make or npm scripts for automation in a Docker-based project?
> **Method:** Chunked Domain Analysis (4 domains + final synthesis)
> **Approach:** Expert Consilium v1.1.0 with minimal context prompts

---

## Executive Summary

**Recommendation:** ✅ **MAKE**

**Consensus:** STRONG_MAJORITY (4/4 domains)

**Confidence:** 0.8

---

## Domain Analysis

### 1. Infrastructure Domain (5 experts synthesized)

**Position:** ✅ SUPPORT (4/5)

**Confidence:** 0.8

**Key Arguments:**
- No npm dependency in container images reduces attack surface
- POSIX standard ensures portability across Unix environments
- Better debugging visibility with verbose output and dry-run
- Industry-standard for infrastructure automation

---

### 2. Delivery Domain (3 experts synthesized)

**Position:** ✅ SUPPORT (2/3)

**Confidence:** 0.7

**Key Arguments:**
- Cross-stack consistency outweighs npm's Node.js integration benefits
- Declarative commands enable better GitOps auditability
- Unified Make interface reduces cognitive load across heterogeneous teams

---

### 3. Quality Domain (2 experts synthesized)

**Position:** ✅ SUPPORT

**Confidence:** 0.75

**Key Arguments:**
- Test-driven development benefits from Make's natural command-to-target mapping
- Quality domain operates at developer level, not end-user level
- Make's declarative syntax enables clear dependency chains for quality gates

---

### 4. AI Domain (2 experts synthesized)

**Position:** ✅ SUPPORT

**Confidence:** 0.85

**Key Arguments:**
- Make targets align with Claude Code's Bash-first interaction model
- No JavaScript runtime overhead in containerized environments
- POSIX-standard Make reduces cross-platform friction for AI agents
- Simpler token footprint: one Makefile vs package.json + node_modules

---

## Final Synthesis

### Solution Architect Recommendation

```json
{
  "recommendation": "MAKE",
  "consensus": "STRONG_MAJORITY",
  "support_count": 4,
  "total_domains": 4,
  "confidence": 0.8,
  "summary": "Make рекомендуются для Docker-based проектов благодаря container-friendly природе и POSIX стандарту.",
  "key_benefits": [
    "No npm dependency in Docker images",
    "Declarative syntax для GitOps auditability",
    "Естественное маппинг к quality gate commands",
    "Оптимальная интеграция с Claude Code Bash tool"
  ],
  "key_concerns": [
    "Node.js CI pipelines могут предпочитать npm scripts",
    "Требует POSIX-совместимый shell"
  ]
}
```

---

## Token Usage Analysis

| Phase | Agents | Tokens |
|-------|--------|--------|
| Phase 1: Infrastructure Domain | 1 | 17,087 |
| Phase 1: Delivery Domain | 1 | ~18K |
| Phase 1: Quality Domain | 1 | ~15K |
| Phase 1: AI Domain | 1 | ~16K |
| Phase 2: Final Synthesis | 1 | 21,566 |
| **Total** | **5** | **~87K** |

**Comparison with previous approach (13 parallel experts):**
- Old: ~2.3M tokens (FAILED - context overflow)
- New: ~87K tokens ✅
- **Reduction: 96%**

---

## Conclusion

**Make** is the recommended choice for Docker-based projects with strong consensus across all domains (4/4). The Chunked Domain Approach proved effective as a solution to the context overflow problem in Agent Teams.

**Generated by:** Expert Consilium v1.1.0
**Total Experts Consulted:** 13 (across 4 domains)
**Token Efficiency:** 96% reduction vs. parallel approach
